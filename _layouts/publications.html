---
layout: page
---

<h1>Publications</h1>
<div class="cards_publication_wrapper">
  
</div>

<script>

  let idAdaComplete = [];
  idAdaComplete.push("PER0251606"); // Simone Pezzuto
  idAdaComplete.push("PER0027674"); // Lucas Omar Muller


  let publications = [];

  const publicationsByIdAda = async (idAda) => {
    const response = await fetch('https://webapps.unitn.it/api/DU/v1/pubblicazione/persona/' + idAda);
    const json = await response.json(); //extract JSON from the http response
    let partial_publications = json.data;

    // FILTER BY KEYWORDS (at least one of these)
    // mbmlab, mbmlab{med,bio, epi}

    // FILTER BY YEAR
    partial_publications = partial_publications.filter((publication) => {
      return publication.anno == 2023;
    });
      
      // publications.filter((publication) => {
    //   return publication.keywords.toLowerCase().includes('mbmlab')
    //   || publication.keywords.toLowerCase().includes('mbmlabmed')
    //   || publication.keywords.toLowerCase().includes('mbmlabbio')
    //   || publication.keywords.toLowerCase().includes('mbmlabepi');
    // });

    publications.push.apply(publications, partial_publications);
    generateHTML();
  }

  const generateHTML = () => {
    publications.map((publication) => {
      // setup to get DOI link
      // **start**
      const DOI_base_url = 'https://doi.org/';
      let DOI;

      let citazione = publication.citazione;

      // extract DOI
      if (citazione.includes('DOI:')) {
        DOI = citazione.split('DOI:')[1].split(' ')[1];
      }
      // **end**

      const card = document.createElement('div');
      card.className = 'card_publication';
      let cardInfo =`
        <a target='_blank' href='${DOI_base_url}${DOI}'>
        <div class='card_info'>
        <p><b>${publication.titolo}</b></p>
        <p>`;

      publication.autori.map((author) => {
        cardInfo += `${author.nominativo}, `;
      });
      cardInfo += `</p>
        <p>${publication.anno}</p>
        </div>
        <img src='assets/images/doi_logo.png' width='30' height='30' />
        </a>
      `;
      // <p>${publication.citazione}</p>
      card.innerHTML = cardInfo;
      document.querySelector('.cards_publication_wrapper').appendChild(card);
    });
  }

  idAdaComplete.map((idAda) => {
    publicationsByIdAda(idAda);
  });
</script>